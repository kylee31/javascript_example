<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>colorgame</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            text-align: center;
            background-color: aliceblue;
        }

        .game {
            width: 600px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0px 0px 3px 3px rgb(0, 0, 0, 0.1);
        }

        .title {
            display: flex;
            margin: 0px auto;
            flex-direction: column;
            padding-top: 30px;
            font-size: 2rem;
            background-color: aquamarine;
            width: 600px;
            height: 190px;
        }

        ul {
            display: flex;
            margin: 0px auto;
            flex-direction: row;
            list-style: none;
            width: 600px;
            color: rgb(20, 146, 146);
        }

        ul>li {
            width: 200px;
            cursor:pointer;
        }

        .palette {
            margin: 0 auto;
            width: 600px;
        }

        .box {
            display: inline-block;
            flex-direction: row;
            width: 150px;
            height: 150px;
            background-color: #000;
            border-radius: 10px;
            margin: 15px;
        }

        li:hover {
            background-color: lightblue;
            color: white;
        }
    </style>
</head>

<body>
    <div class="game">
        <!--ì»¬ëŸ¬ rgb ë³´ì—¬ì£¼ê¸°-->
        <div class="title">
            THE GREAT
            <h1 id="result">RGB(0,0,0)</h1>
            GUESSING GAME
        </div>
        <!--ìƒ‰ìƒ ë©”ë‰´ë°”-->
        <div>
            <ul>
                <li id="colorC" onclick="newC()">NEW COLORS</li>
                <li id="easy" onclick="mode(3);newC();">EASY</li>
                <li id="hard" onclick="mode(6);newC();">HARD</li>
            </ul>
        </div>
        <!--íŒ”ë ˆíŠ¸, ìì‹ ë…¸ë“œì— ì»¬ëŸ¬ìƒì ìƒì„±-->
        <div class="palette">
        </div>
    </div>
    <script>
        //easyëª¨ë“œ, hardëª¨ë“œ êµ¬í˜„í•˜ê¸°
        //easyëŠ” ë°•ìŠ¤ 3ê°œ
        //hardëŠ” ë°•ìŠ¤ 6ê°œ
        //ë§¤ê°œë³€ìˆ˜ ê°’ì„ ë³€ê²½í•´ì„œ ë°›ìœ¼ë©´ í¸í• ë“¯
        //divë¥¼ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë§Œë“¤ì–´ì•¼ 3ê°œ í´ë¦­ê³¼ 6ê°œ í´ë¦­ì´ ê°€ëŠ¥í• ë“¯
        //draw ì˜ˆì œì²˜ëŸ¼ ë³€ê²½í•˜ê¸°

        var mycolor = "";
        var num = 0;
        var x;
        //ì»¬ëŸ¬ìƒì í´ë˜ìŠ¤ë¡œ ê°€ì ¸ì˜¤ê¸°
        var colorO;
        
        //íŒ”ë ˆíŠ¸(ë¶€ëª¨ ë…¸ë“œ)
        var palette=document.querySelector(".palette");
        var colorBox = document.getElementsByClassName("box");

        //easyëª¨ë“œ, hardëª¨ë“œ
        function mode(e){
            //ì»¬ëŸ¬ë°•ìŠ¤ ì§€ìš°ê³  ë‹¤ì‹œ ì„¤ì •
            while(palette.hasChildNodes()){palette.removeChild(palette.firstChild);}
            //ë§¤ê°œë³€ìˆ˜ eë§Œí¼ ë°˜ë³µí•´ì„œ colorbox ìƒì„±
            for(let i=0;i<e;i++){
                var box=document.createElement("div");
                box.setAttribute("class","box");
                palette.appendChild(box);
            }
        }

        //rgb ëœë¤ ìƒ‰ìƒ ë§Œë“¤ê¸° (math() ë©”ì†Œë“œ ì‚¬ìš©)
        function makeColor() {
            const r = Math.floor(Math.random() * 256);
            const g = Math.floor(Math.random() * 256);
            const b = Math.floor(Math.random() * 256);

            mycolor = "RGB(" + r + "," + g + "," + b + ")";
            return mycolor;
        }
        
        //newC()
        //ìƒˆë¡œìš´ ì»¬ëŸ¬ ë§Œë“¤ì–´ì„œ ì„¤ì •í•˜ê¸°
        function newC() {
            x = 0;
            for (i = 0; i < colorBox.length; i++) {
                colorBox[i].style.visibility="visible";
                colorBox[i].style.backgroundColor = makeColor();
            }
            var colorGuess = document.getElementById("result");
            //ì„¤ì •ëœ 6ê°œì˜ ìƒ‰ìƒ ì¤‘ í•˜ë‚˜ë¥¼ ëœë¤ìœ¼ë¡œ ê³ ë¥´ëŠ” ì½”ë“œ 
            colorO = String(colorBox[Math.floor(Math.random() * colorBox.length)].style.backgroundColor).toUpperCase();
            colorGuess.innerHTML = colorO;
        }
        //ì»¬ëŸ¬ë°•ìŠ¤ ë§ˆìš°ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸
        //ì´ë ‡ê²Œ í•˜ë‚˜í•˜ë‚˜ ë‹¤ ë¶€ì—¬í•˜ì§€ ì•Šê³  <div class='palette'> íƒœê·¸ ì´ìš©í•˜ì—¬ e.targetì„ ì´ìš©í•˜ì—¬ ìì‹ íƒœê·¸ì— ì´ë²¤íŠ¸ ë¶€ì—¬ ê°€ëŠ¥
        //Array.from(colorBox).forEach(color => color.addEventListener("click", colorClick));

        document.querySelector(".palette").addEventListener("click",colorClick);
        //colorClick()
        //ì •ë‹µì—¬ë¶€ íŒë³„
        function colorClick(event) {
            const color = event.target.style.backgroundColor;
            //rgbëŠ” ì†Œë¬¸ìë¡œ ì¶œë ¥ë˜ëŠ”ë°, makeColor()ì—ì„œ ëŒ€ë¬¸ìë¡œ ì‘ì„±í–ˆìœ¼ë¯€ë¡œ toLowerCase() ë©”ì†Œë“œ ì‚¬ìš©
            if (color == colorO.toLowerCase()) {
                o = num;
                num++;
                alert("âœ… " + num);
                newC();
            }
            else {
                //í´ë¦­í•œ ìƒìê°€ ì˜¤ë‹µì´ë©´ ì»¬ëŸ¬ë°•ìŠ¤ ì§€ìš°ê¸°
                //JavaScriptë¡œ visibility ì‚¬ìš©í•´ì•¼ í• ë“¯, ë°°ê²½ìƒ‰ ì„¤ì •ì€ ê·¸ëƒ¥ ëˆˆì†ì„
                //ì²˜ìŒ ì½”ë“œì—ì„œëŠ” ë°°ê²½ìƒ‰ì„ ë³€ê²½í–ˆì§€ë§Œ visibility ì‚¬ìš©ì´ í›¨ì”¬ íš¨ìœ¨ì ì´ë¼ê³  ìƒê°í•´ì„œ ë³€ê²½(ë¦¬íŒ©í† ë§)
                event.target.style.visibility="hidden";
                alert("âŒ");
                x++;

                //3ë²ˆ ì˜¤ë‹µì´ë©´ ë‹¤ìŒ ê²Œì„ìœ¼ë¡œ ë„˜ì–´ê°€ê¸°
                if(x==3){
                setTimeout(function(){
                    alert("FAILğŸ˜“");
                    x=0;
                    newC();
                },200);
            }
            }
        }
        
        //ì²˜ìŒ ì‹œì‘
        mode(3);
        newC();

    </script>
</body>

</html>