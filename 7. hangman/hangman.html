<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hangman</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            background-color: rgb(176, 226, 68);
        }

        body {
            text-align: center;
            color: white;
        }

        #title {
            font-size: 2rem;
        }

        .box {
            display: inline-block;
            font-size: 1.5rem;
            width: 50px;
            height: 50px;
            background-color: white;
            color: rgb(176, 226, 68);
        }

        #show {
            font-size: 3rem;
            font-weight: 900;
        }

        .box+.box {
            margin-left: 10px;
            margin-bottom: 10px;
        }

        .word {
            font-size: 4rem;
            font-weight: 900;
        }

        .word+.word {
            margin-left: 20px;
        }
    </style>
</head>

<body>
    <div id="title">
        HANGMAN<br>
        JAVASCRIPT HANGMAN GAME<br>
        <br>
        Use the alphabet below to guess the word.
    </div><br>
    <div style="font-size:1.4rem">chance <span id="live"></span></div><br>
    <div id="alphabet">
    </div><br>
    <div style="font-size:2rem">
        Category : fruit
    </div><br><br>
    <div id="show">
    </div>
</body>
<script>
    var alpa = document.getElementById("alphabet");
    //ì•ŒíŒŒë²³ 26ê°œ
    var a = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];
    //ì†ì„±,ê°’ ìŒ í˜•ì‹ ë”•ì…”ë„ˆë¦¬ í™œìš©í•´ì„œ íŒíŠ¸ ë³´ì—¬ì£¼ê¸°?
    //ë‹¨ì–´
    var fruit = ["apple", "banana", "melon", "grape", "peach", "watermelon","orange"];
    var show = document.getElementById("show");
    var btn = document.getElementsByClassName("box");
    var word = document.getElementsByClassName("word");
    var showlive = document.getElementById("live");
    var live; //ê¸°íšŒ íšŸìˆ˜
    var no; //ì—†ëŠ” ì•ŒíŒŒë²³ ê²€ì‚¬í•  ë³€ìˆ˜
    var o; //ëœë¤ìœ¼ë¡œ ì„ íƒë  ë‹¨ì–´ ì €ì¥í•  ë³€ìˆ˜

    var num;

    //ì•ŒíŒŒë²³ ë°•ìŠ¤ ë„£ê¸°
    for (var i = 0; i < 26; i++) {
        alpa.innerHTML += "<div class='box'>" + a[i] + "</div>";
    }

    //ì´ˆê¸°í™”(ìƒˆ ë‹¨ì–´)
    function init() {
        live = 5;//ìƒëª… 5ë¡œ ì´ˆê¸°í™”í•˜ê³  ë³´ì—¬ì£¼ê¸°
        showlive.innerHTML = live;

        //btn visible ì´ˆê¸°í™”
        for (i = 0; i < 26; i++) {
            btn[i].style.visibility = "visible";
        }

        //ì •ë‹µ ë‹¨ì–´ ì„ íƒí•˜ê¸°
        num = Math.floor(Math.random() * (fruit.length));
        o = fruit[num];

        console.log(o);

        show.innerHTML = "";

        //ë§ˆì§€ë§‰ ë‹¨ì–´ê¹Œì§€ ë§ì¶˜ ê²½ìš°
        if (fruit.length == 0) {
            setTimeout(function () {
                for (i = 0; i < 26; i++) {
                    btn[i].style.visibility = "visible";
                }
                live = 5;
                showlive.innerHTML = live;
                show.innerHTML = "FinishğŸ‘";
            }, 300);
        }
        //ë§ì¶°ì•¼ í•˜ëŠ” ë‹¨ì–´ê°€ ë‚¨ì•„ìˆëŠ” ê²½ìš°
        else {
            //ë‹¨ì–´ ê¸¸ì´ë§Œí¼ _ ë„£ê¸°
            for (i = 0; i < o.length; i++) {
                show.innerHTML += "<span class='word'>_</span>";
            }
        }
    }

    //jsì—ì„œ ì„ ì–¸í•œ classì™€ htmlì—ì„œ ì„ ì–¸í•œ classì˜ ì°¨ì´ì  ë•Œë¬¸ì¸ê±´ê°€??
    //get~ì™€ query~ì˜ ì°¨ì´ì ì„ ëª¨ë¥´ê² ìŒ..
    //ì–´ë–¤ì ì´ ë‹¤ë¥´ê¸¸ë˜ ì´ë ‡ê²Œ ì¨ì•¼í•˜ëŠ”ê±´ì§€?
    //ì•„ë¬´íŠ¼ get~ì€ arrayê°€ í•„ìš”í•˜ê³  queryëŠ” foreachë¡œë§Œ ì‚¬ìš©ê°€ëŠ¥í•¨

    //ë²„íŠ¼ ì´ë²¤íŠ¸
    Array.from(btn).forEach(event => event.addEventListener("click", choice));

    //ë²„íŠ¼ ì„ íƒì‹œ ì¼ì–´ë‚˜ëŠ” ì´ë²¤íŠ¸
    function choice() {
        no = 0;
        //ë‹¨ì–´ ê¸¸ì´ë§Œí¼ ë°˜ë³µ
        for (i = 0; i < o.length; i++) {
            //ë‹¨ì–´ì— ë“¤ì–´ìˆëŠ” ì•ŒíŒŒë²³ ì¼ë•Œ, _ì§€ìš°ê³  ì•ŒíŒŒë²³ ë„£ê¸°
            if (this.innerText == o[i]) {
                word[i].innerText = "";
                word[i].innerText += this.innerText;
            }
            //ì—†ëŠ” ì•ŒíŒŒë²³ì´ë©´ noê°’ 1ì”© ì˜¬ë¦¬ê¸°
            else if (this.innerHTML != o[i]) {
                no++;
            }
        }
        //ì—†ëŠ” ì•ŒíŒŒë²³ì´ë©´ ê¸°íšŒ 1 ì°¨ê°
        if (no == o.length) {
            live--;
            showlive.innerHTML = live;
        }

        //ëˆ„ë¥¸ ë²„íŠ¼ ì•ˆë³´ì´ê¸°
        this.style.visibility = "hidden";
        //ë‹¨ì–´ ì™„ì„±ë„ ê²€ì‚¬
        correct();
        //ê¸°íšŒ ê²€ì‚¬
        life();
    }

    //ì™„ì„±ëœ ë‹¨ì–´ ê²€ì‚¬í•˜ê¸°
    function correct() {
        //spanì˜ innertextë¥¼ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ ì €ì¥í•˜ê¸°
        //ë°°ì—´ë¡œ ì‘ì„±í•˜ë ¤ë©´ my=[]; my.push(word[i].innerText);ë¡œ ì‘ì„±í•´ì•¼í•¨
        //ë°°ì—´ë¡œ ì‘ì„±í•˜ë©´ ì•ŒíŒŒë²³ì´ ê°ê° ìš”ì†Œë¡œ ì €ì¥ë˜ë¯€ë¡œ ë¬¸ìì—´ë¡œ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©í–ˆìŒ
        //ë°°ì—´ë¡œ ë‹´ìœ¼ë ¤ë©´ toString(), join(), JSON.stringify() í™œìš©í•´ì„œ ë³€í™˜ í›„ ì´ìš©í•˜ê¸°?
        var my = "";
        for (i = 0; i < word.length; i++) {
            my += word[i].innerText;
        }

        //ì™„ì„±ë‹¨ì–´ì™€ ì •ë‹µì´ ê°™ìœ¼ë©´ ì‹¤í–‰
        if (my == o) {
            //ë‹¨ì–´ ì¤‘ë³µë˜ì§€ ì•Šë„ë¡ ë°°ì—´ì—ì„œ ì œê±° splice()ë©”ì†Œë“œ ì‚¬ìš©
            fruit.splice(num, 1);

            setTimeout(function () {
                show.innerHTML = "SUCCESSğŸ˜†";
            }, 400);
            setTimeout(init, 1000);
        }
    }

    //ê¸°íšŒ ê²€ì‚¬í•˜ê¸° (ì‹¤íŒ¨ ì‹œ ì •ë‹µ ë³´ì—¬ì£¼ê¸°)
    function life() {
        if (live == 0) {
            fruit.splice(num, 1);
            show.innerHTML = "FAILğŸ˜“" + "<br>The answer is <span style='color:green'>" + o + "</span>";
            setTimeout(init, 1000);
        }
    }

    init();

</script>

</html>